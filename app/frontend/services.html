<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#f8e5e1">
    <title>サービス管理 - 美容室VOTAN</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/main-unified.css?v=20250907">
    <style>
        .services-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .services-header {
            background: linear-gradient(135deg, #f8e5e1 0%, #f4d1c7 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        .services-categories {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .category-tab {
            padding: 12px 24px;
            border: 2px solid #d4a574;
            background: white;
            color: #d4a574;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .category-tab.active {
            background: #d4a574;
            color: white;
        }
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        .service-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-left: 4px solid #d4a574;
            transition: transform 0.3s ease;
        }
        .service-card:hover {
            transform: translateY(-5px);
        }
        .service-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4a574, #c49660);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin-bottom: 15px;
        }
        .service-price {
            font-size: 24px;
            font-weight: bold;
            color: #d4a574;
            margin: 10px 0;
        }
        .service-duration {
            background: #e8f5e8;
            color: #2d7d32;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
            margin-bottom: 15px;
        }
        .service-tags {
            display: flex;
            gap: 8px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .service-tag {
            background: #f0f8ff;
            color: #2196f3;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        .add-service-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: #d4a574;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        .add-service-btn:hover {
            background: #c49660;
            transform: scale(1.1);
        }
        .service-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            justify-content: around;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 16px;
            font-weight: bold;
            color: #8b4513;
        }
        .stat-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="services-container">
        <div class="services-header">
            <h1 style="color: #8b4513; margin: 0; font-size: 2.5rem; font-family: 'Playfair Display', serif;">
                💄 サービス管理
            </h1>
            <p style="color: #666; margin: 10px 0 0; font-size: 1.1rem;">
                メニューと料金の管理
            </p>
        </div>

        <div class="services-categories">
            <button class="category-tab active" data-category="all">全て</button>
            <button class="category-tab" data-category="hair">ヘアケア</button>
            <button class="category-tab" data-category="color">カラー</button>
            <button class="category-tab" data-category="perm">パーマ</button>
            <button class="category-tab" data-category="treatment">トリートメント</button>
            <button class="category-tab" data-category="special">特別メニュー</button>
        </div>

        <div class="services-grid" id="servicesGrid">
            <!-- Service cards will be loaded here -->
        </div>

        <button class="add-service-btn" onclick="openNewServiceModal()">
            +
        </button>
    </div>

    <!-- New Service Modal -->
    <div id="newServiceModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>新規サービス追加</h2>
                <span class="close" onclick="closeNewServiceModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="newServiceForm">
                    <div class="form-group">
                        <label for="serviceName">サービス名</label>
                        <input type="text" id="serviceName" name="serviceName" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceCategory">カテゴリー</label>
                        <select id="serviceCategory" name="serviceCategory" required>
                            <option value="">カテゴリーを選択</option>
                            <option value="hair">ヘアケア</option>
                            <option value="color">カラー</option>
                            <option value="perm">パーマ</option>
                            <option value="treatment">トリートメント</option>
                            <option value="special">特別メニュー</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="servicePrice">料金 (円)</label>
                            <input type="number" id="servicePrice" name="servicePrice" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="serviceDuration">所要時間 (分)</label>
                            <input type="number" id="serviceDuration" name="serviceDuration" min="10" step="10" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="serviceDescription">説明</label>
                        <textarea id="serviceDescription" name="serviceDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="serviceTags">タグ (カンマ区切り)</label>
                        <input type="text" id="serviceTags" name="serviceTags" placeholder="例: 人気, おすすめ, 新メニュー">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="serviceActive" name="serviceActive" checked>
                            アクティブ (予約可能)
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeNewServiceModal()">キャンセル</button>
                        <button type="submit" class="btn-primary">サービスを追加</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Mock services data
        const mockServices = [
            {
                id: 1,
                name: 'カット',
                category: 'hair',
                price: 4000,
                duration: 60,
                description: 'お客様の骨格と髪質に合わせたスタイルカット',
                tags: ['基本', '人気'],
                icon: '✂️',
                active: true,
                bookingCount: 45,
                avgRating: 4.8
            },
            {
                id: 2,
                name: 'カラー',
                category: 'color',
                price: 6000,
                duration: 90,
                description: 'トレンドを取り入れた美しいカラーリング',
                tags: ['トレンド', 'おすすめ'],
                icon: '🎨',
                active: true,
                bookingCount: 38,
                avgRating: 4.9
            },
            {
                id: 3,
                name: 'カット & カラー',
                category: 'special',
                price: 8000,
                duration: 120,
                description: 'カットとカラーのお得なセットメニュー',
                tags: ['セット', '人気', 'お得'],
                icon: '💫',
                active: true,
                bookingCount: 62,
                avgRating: 4.9
            },
            {
                id: 4,
                name: 'パーマ',
                category: 'perm',
                price: 8500,
                duration: 120,
                description: 'デジタルパーマでふんわり美しいウェーブ',
                tags: ['ボリューム', 'ウェーブ'],
                icon: '🌊',
                active: true,
                bookingCount: 28,
                avgRating: 4.7
            },
            {
                id: 5,
                name: 'トリートメント',
                category: 'treatment',
                price: 3000,
                duration: 45,
                description: '髪の内部から修復する集中トリートメント',
                tags: ['ケア', '修復'],
                icon: '✨',
                active: true,
                bookingCount: 35,
                avgRating: 4.8
            },
            {
                id: 6,
                name: 'ヘッドスパ',
                category: 'treatment',
                price: 4500,
                duration: 60,
                description: 'リラックス効果の高いヘッドマッサージ',
                tags: ['リラックス', 'マッサージ'],
                icon: '🧴',
                active: true,
                bookingCount: 22,
                avgRating: 4.9
            },
            {
                id: 7,
                name: 'ブライダルセット',
                category: 'special',
                price: 15000,
                duration: 180,
                description: '特別な日のための上質なヘアセット',
                tags: ['ブライダル', '特別', '上質'],
                icon: '👰',
                active: true,
                bookingCount: 8,
                avgRating: 5.0
            },
            {
                id: 8,
                name: '白髪染め',
                category: 'color',
                price: 5500,
                duration: 75,
                description: '自然に仕上がる白髪染めサービス',
                tags: ['白髪', 'ナチュラル'],
                icon: '🎯',
                active: true,
                bookingCount: 31,
                avgRating: 4.6
            }
        ];

        // Initialize services page
        document.addEventListener('DOMContentLoaded', function() {
            displayServices(mockServices);
            initializeCategories();
        });

        function displayServices(services, filterCategory = 'all') {
            const grid = document.getElementById('servicesGrid');
            
            const filteredServices = filterCategory === 'all' 
                ? services 
                : services.filter(service => service.category === filterCategory);
            
            if (filteredServices.length === 0) {
                grid.innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">該当するサービスがありません</div>';
                return;
            }

            grid.innerHTML = filteredServices.map(service => `
                <div class="service-card" data-category="${service.category}">
                    <div class="service-icon">
                        ${service.icon}
                    </div>
                    
                    <div>
                        <h3 style="margin: 0; color: #8b4513; font-size: 1.3rem;">${service.name}</h3>
                        <div class="service-price">¥${service.price.toLocaleString()}</div>
                        <span class="service-duration">${service.duration}分</span>
                        
                        <p style="margin: 15px 0; color: #666; line-height: 1.5;">
                            ${service.description}
                        </p>

                        <div class="service-tags">
                            ${service.tags.map(tag => `<span class="service-tag">${tag}</span>`).join('')}
                            ${!service.active ? '<span class="service-tag" style="background: #ffebee; color: #c62828;">停止中</span>' : ''}
                        </div>

                        <div class="service-stats">
                            <div class="stat-item">
                                <div class="stat-value">${service.bookingCount}</div>
                                <div class="stat-label">今月予約</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${service.avgRating}</div>
                                <div class="stat-label">平均評価</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${service.active ? 'ON' : 'OFF'}</div>
                                <div class="stat-label">ステータス</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn-sm btn-primary" onclick="editService(${service.id})">編集</button>
                            <button class="btn-sm btn-secondary" onclick="viewServiceAnalytics(${service.id})">分析</button>
                            <button class="btn-sm ${service.active ? 'btn-warning' : 'btn-success'}" onclick="toggleService(${service.id})">
                                ${service.active ? '停止' : '開始'}
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function initializeCategories() {
            const categoryTabs = document.querySelectorAll('.category-tab');
            categoryTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Update active state
                    categoryTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter services
                    const category = this.dataset.category;
                    displayServices(mockServices, category);
                });
            });
        }

        function openNewServiceModal() {
            document.getElementById('newServiceModal').style.display = 'block';
        }

        function closeNewServiceModal() {
            document.getElementById('newServiceModal').style.display = 'none';
            document.getElementById('newServiceForm').reset();
        }

        function editService(id) {
            alert(`サービス編集機能 (ID: ${id}) - 実装予定`);
        }

        function viewServiceAnalytics(id) {
            alert(`サービス分析機能 (ID: ${id}) - 実装予定`);
        }

        function toggleService(id) {
            const service = mockServices.find(s => s.id === id);
            if (service) {
                service.active = !service.active;
                const activeTab = document.querySelector('.category-tab.active');
                displayServices(mockServices, activeTab.dataset.category);
                alert(`サービス「${service.name}」を${service.active ? '有効' : '無効'}にしました`);
            }
        }

        // Handle new service form submission
        document.getElementById('newServiceForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const serviceData = Object.fromEntries(formData.entries());
            
            // Convert tags string to array
            if (serviceData.serviceTags) {
                serviceData.tags = serviceData.serviceTags.split(',').map(tag => tag.trim());
                delete serviceData.serviceTags;
            }

            // Convert checkbox value
            serviceData.serviceActive = formData.has('serviceActive');
            
            // Here you would typically send the data to your backend
            console.log('New service data:', serviceData);
            alert('新規サービス追加機能 - 実装予定');
            closeNewServiceModal();
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(e) {
            const modal = document.getElementById('newServiceModal');
            if (e.target === modal) {
                closeNewServiceModal();
            }
        });

        // Service category icons mapping
        function getCategoryIcon(category) {
            const icons = {
                'hair': '✂️',
                'color': '🎨',
                'perm': '🌊',
                'treatment': '✨',
                'special': '💫'
            };
            return icons[category] || '💄';
        }
    </script>
</body>
</html>