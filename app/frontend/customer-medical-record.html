<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»å­ã‚«ãƒ«ãƒ† - Salon LumiÃ¨re</title>
    <link rel="stylesheet" href="/css/legacy/main-unified.css?v=20250907">
    <link rel="stylesheet" href="/css/mobile-navigation.css">
    <style>
        .medical-record-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .patient-header {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--secondary) 100%);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .patient-avatar {
            width: 80px;
            height: 80px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }
        
        .patient-info h1 {
            margin: 0 0 0.5rem 0;
            color: var(--text-dark);
            font-size: 1.5rem;
        }
        
        .patient-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .medical-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .medical-section {
            background: var(--white);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
        }
        
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-dark);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 0.5rem;
        }
        
        .treatment-history {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .treatment-item {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary);
        }
        
        .treatment-date {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
        }
        
        .treatment-service {
            font-weight: 500;
            margin: 0.5rem 0;
        }
        
        .treatment-notes {
            color: var(--text-medium);
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .allergy-item {
            background: var(--warning-light);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .allergy-severity {
            font-weight: 600;
            color: var(--warning);
        }
        
        .notes-section {
            background: var(--info-light);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .photo-item {
            aspect-ratio: 1;
            background: var(--gray-200);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .photo-item:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" id="mobileMenuToggle">â˜°</button>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-wrapper">âœ¨</div>
            <h2 class="salon-name">Salon LumiÃ¨re</h2>
            <span class="plan-badge">PREMIUM</span>
        </div>

        <nav class="nav-menu">
            <a href="/dashboard.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span>ãƒ›ãƒ¼ãƒ </span>
            </a>
            <a href="/appointments.html" class="nav-item">
                <span class="nav-icon">ğŸ“…</span>
                <span>äºˆç´„</span>
            </a>
            <a href="/customers.html" class="nav-item active">
                <span class="nav-icon">ğŸ‘¥</span>
                <span>é¡§å®¢</span>
            </a>
            <a href="/messages.html" class="nav-item">
                <span class="nav-icon">ğŸ’¬</span>
                <span>é€£çµ¡</span>
            </a>
            <a href="/reports.html" class="nav-item">
                <span class="nav-icon">ğŸ“ˆ</span>
                <span>å£²ä¸Š</span>
            </a>
            <a href="/settings.html" class="nav-item">
                <span class="nav-icon">âš™ï¸</span>
                <span>è¨­å®š</span>
            </a>
        </nav>

        <div class="user-section">
            <div class="user-info">
                <div class="user-avatar">ç®¡</div>
                <div class="user-details">
                    <div class="user-name">ç®¡ç†è€…</div>
                    <div class="user-role">Administrator</div>
                </div>
            </div>
            <button class="logout-btn" id="logoutBtn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </aside>

    <main class="main-content">
        <div class="medical-record-container">
            <!-- æ‚£è€…ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <div class="patient-header">
                <div class="patient-avatar" id="patientAvatar">å±±</div>
                <div class="patient-info">
                    <h1 id="patientName">å±±ç”° èŠ±å­ æ§˜</h1>
                    <div class="patient-details">
                        <div><strong>é¡§å®¢ID:</strong> <span id="customerId">C-001</span></div>
                        <div><strong>é›»è©±ç•ªå·:</strong> <span id="patientPhone">090-1234-5678</span></div>
                        <div><strong>ãƒ¡ãƒ¼ãƒ«:</strong> <span id="patientEmail">yamada@email.com</span></div>
                        <div><strong>æœ€çµ‚æ¥åº—:</strong> <span id="lastVisit">2024-03-14</span></div>
                        <div><strong>æ¥åº—å›æ•°:</strong> <span id="visitCount">23å›</span></div>
                        <div><strong>ç´¯è¨ˆé‡‘é¡:</strong> <span id="totalSpent">Â¥128,000</span></div>
                    </div>
                </div>
            </div>

            <div class="medical-sections">
                <!-- å·¦å´ï¼šæ–½è¡“å±¥æ­´ -->
                <div class="medical-section">
                    <h2 class="section-title">ğŸ“‹ æ–½è¡“å±¥æ­´</h2>
                    <div class="treatment-history" id="treatmentHistory">
                        <div class="treatment-item">
                            <div class="treatment-date">2024å¹´3æœˆ14æ—¥</div>
                            <div class="treatment-service">ã‚«ãƒƒãƒˆ + ã‚«ãƒ©ãƒ¼ + ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ</div>
                            <div class="treatment-notes">
                                <strong>æ‹…å½“:</strong> ç”°ä¸­ã‚¹ã‚¿ãƒƒãƒ•<br>
                                <strong>æ–½è¡“æ™‚é–“:</strong> 90åˆ†<br>
                                <strong>æ–™é‡‘:</strong> Â¥12,000<br>
                                <strong>ã‚«ãƒ©ãƒ¼:</strong> 8ãƒˆãƒ¼ãƒ³ã®ã‚¢ãƒƒã‚·ãƒ¥ãƒ–ãƒ©ã‚¦ãƒ³<br>
                                <strong>ä½¿ç”¨è–¬å‰¤:</strong> ã‚¤ãƒ«ãƒŸãƒŠã‚«ãƒ©ãƒ¼<br>
                                <strong>è¨˜éŒ²:</strong> å‰é«ªã‚’5mmçŸ­ãã€‚å…¨ä½“çš„ã«è»½ã‚„ã‹ãªä»•ä¸ŠãŒã‚Šã€‚ãŠå®¢æ§˜å¤§å¤‰æº€è¶³ã€‚
                            </div>
                        </div>
                        
                        <div class="treatment-item">
                            <div class="treatment-date">2024å¹´1æœˆ20æ—¥</div>
                            <div class="treatment-service">ã‚«ãƒƒãƒˆ + ãƒ‘ãƒ¼ãƒ</div>
                            <div class="treatment-notes">
                                <strong>æ‹…å½“:</strong> ä½è—¤ã‚¹ã‚¿ãƒƒãƒ•<br>
                                <strong>æ–½è¡“æ™‚é–“:</strong> 120åˆ†<br>
                                <strong>æ–™é‡‘:</strong> Â¥15,000<br>
                                <strong>ãƒ‘ãƒ¼ãƒ:</strong> ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ‘ãƒ¼ãƒï¼ˆã‚†ã‚‹ã‚ï¼‰<br>
                                <strong>è¨˜éŒ²:</strong> é«ªè³ªãŒç´°ã„ãŸã‚å¼±ã‚ã®è–¬å‰¤ä½¿ç”¨ã€‚æŒã¡ãŒè‰¯å¥½ã€‚
                            </div>
                        </div>
                        
                        <div class="treatment-item">
                            <div class="treatment-date">2023å¹´12æœˆ10æ—¥</div>
                            <div class="treatment-service">ã‚«ãƒƒãƒˆ + ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ</div>
                            <div class="treatment-notes">
                                <strong>æ‹…å½“:</strong> ç”°ä¸­ã‚¹ã‚¿ãƒƒãƒ•<br>
                                <strong>æ–½è¡“æ™‚é–“:</strong> 75åˆ†<br>
                                <strong>æ–™é‡‘:</strong> Â¥8,000<br>
                                <strong>è¨˜éŒ²:</strong> ä¹¾ç‡¥ãŒæ°—ã«ãªã‚‹ãŸã‚ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆé‡ç‚¹ã€‚æ¯›å…ˆã®çŠ¶æ…‹æ”¹å–„ã€‚
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="addNewTreatment()" style="width: 100%; margin-top: 1rem;">
                        æ–°è¦æ–½è¡“è¨˜éŒ²ã‚’è¿½åŠ 
                    </button>
                </div>

                <!-- å³å´ï¼šåŒ»ç™‚æƒ…å ±ãƒ»æ³¨æ„äº‹é … -->
                <div class="medical-section">
                    <h2 class="section-title">âš ï¸ åŒ»ç™‚æƒ…å ±ãƒ»æ³¨æ„äº‹é …</h2>
                    
                    <!-- ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ± -->
                    <div style="margin-bottom: 2rem;">
                        <h3 style="color: var(--warning); margin-bottom: 1rem;">ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±</h3>
                        <div class="allergy-item">
                            <div class="allergy-severity">é‡è¦</div>
                            <div><strong>ã‚¸ã‚¢ãƒŸãƒ³ç³»ã‚«ãƒ©ãƒ¼å‰¤ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼</strong></div>
                            <div style="font-size: 0.9rem; margin-top: 0.5rem;">
                                ç—‡çŠ¶: ã‹ã‚†ã¿ãƒ»ç™ºç–¹<br>
                                å¯¾å¿œ: ãƒ‘ãƒƒãƒãƒ†ã‚¹ãƒˆå¿…é ˆã€ãƒãƒ³ã‚¸ã‚¢ãƒŸãƒ³ã‚«ãƒ©ãƒ¼ä½¿ç”¨
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä½“è³ªãƒ»ç‰¹è¨˜äº‹é … -->
                    <div style="margin-bottom: 2rem;">
                        <h3 style="color: var(--text-dark); margin-bottom: 1rem;">ä½“è³ªãƒ»ç‰¹è¨˜äº‹é …</h3>
                        <div class="notes-section">
                            <div><strong>è‚Œè³ª:</strong> æ•æ„Ÿè‚Œ</div>
                            <div><strong>é«ªè³ª:</strong> ç´°æ¯›ã€ã‚„ã‚ã‚‰ã‹ã„</div>
                            <div><strong>é ­çš®:</strong> ä¹¾ç‡¥ã—ã‚„ã™ã„</div>
                            <div><strong>å¸Œæœ›:</strong> ãƒŠãƒãƒ¥ãƒ©ãƒ«ãªä»•ä¸ŠãŒã‚Šå¸Œæœ›</div>
                            <div><strong>æ³¨æ„:</strong> å¼·ã„è–¬å‰¤ã¯é¿ã‘ã‚‹</div>
                        </div>
                    </div>
                    
                    <!-- æ–½è¡“å†™çœŸ -->
                    <div>
                        <h3 style="color: var(--text-dark); margin-bottom: 1rem;">æ–½è¡“å†™çœŸ</h3>
                        <div class="photo-gallery">
                            <div class="photo-item" onclick="viewPhoto('before-2024-03-14')">
                                <div style="text-align: center; color: var(--text-medium);">
                                    <div style="font-size: 1.5rem;">ğŸ“·</div>
                                    <div style="font-size: 0.8rem;">Before<br>3/14</div>
                                </div>
                            </div>
                            <div class="photo-item" onclick="viewPhoto('after-2024-03-14')">
                                <div style="text-align: center; color: var(--text-medium);">
                                    <div style="font-size: 1.5rem;">ğŸ“·</div>
                                    <div style="font-size: 0.8rem;">After<br>3/14</div>
                                </div>
                            </div>
                            <div class="photo-item" onclick="viewPhoto('process-2024-03-14')">
                                <div style="text-align: center; color: var(--text-medium);">
                                    <div style="font-size: 1.5rem;">ğŸ“·</div>
                                    <div style="font-size: 0.8rem;">Process<br>3/14</div>
                                </div>
                            </div>
                            <div class="photo-item" onclick="addPhoto()" style="border: 2px dashed var(--primary);">
                                <div style="text-align: center; color: var(--primary);">
                                    <div style="font-size: 1.5rem;">â•</div>
                                    <div style="font-size: 0.8rem;">å†™çœŸè¿½åŠ </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="editMedicalInfo()" style="width: 100%; margin-top: 1rem;">
                        åŒ»ç™‚æƒ…å ±ã‚’ç·¨é›†
                    </button>
                </div>
            </div>
            
            <!-- ä¸‹éƒ¨ï¼šã‚«ãƒ«ãƒ†æ“ä½œ -->
            <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: center;">
                <button class="btn btn-secondary" onclick="printRecord()">
                    ã‚«ãƒ«ãƒ†å°åˆ·
                </button>
                <button class="btn btn-secondary" onclick="exportRecord()">
                    ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›
                </button>
                <button class="btn btn-primary" onclick="goBackToCustomers()">
                    é¡§å®¢ä¸€è¦§ã«æˆ»ã‚‹
                </button>
            </div>
        </div>
    </main>

    <!-- ãƒ¢ãƒã‚¤ãƒ«åº•éƒ¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav class="mobile-bottom-nav" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
        <div class="mobile-nav-items">
            <a href="/dashboard.html" class="mobile-nav-item">
                <div class="mobile-nav-icon">ğŸ </div>
                <div class="mobile-nav-label">ãƒ›ãƒ¼ãƒ </div>
            </a>
            <a href="/appointments.html" class="mobile-nav-item">
                <div class="mobile-nav-icon">ğŸ“…</div>
                <div class="mobile-nav-label">äºˆç´„</div>
            </a>
            <a href="/customers.html" class="mobile-nav-item active" aria-current="page">
                <div class="mobile-nav-icon">ğŸ‘¥</div>
                <div class="mobile-nav-label">é¡§å®¢</div>
            </a>
            <a href="/messages.html" class="mobile-nav-item">
                <div class="mobile-nav-icon">ğŸ’¬</div>
                <div class="mobile-nav-label">é€£çµ¡</div>
            </a>
            <a href="/settings.html" class="mobile-nav-item">
                <div class="mobile-nav-icon">âš™ï¸</div>
                <div class="mobile-nav-label">è¨­å®š</div>
            </a>
        </div>
    </nav>

    <script>
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰é¡§å®¢IDã‚’å–å¾—
        const urlParams = new URLSearchParams(window.location.search);
        const customerId = urlParams.get('customer') || '1';
        
        // é¡§å®¢ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const customerDatabase = {
            '1': {
                id: 'C-001',
                name: 'å±±ç”° èŠ±å­',
                phone: '090-1234-5678',
                email: 'yamada@email.com',
                lastVisit: '2024-03-14',
                visitCount: 23,
                totalSpent: 128000,
                allergies: [
                    {
                        type: 'ã‚¸ã‚¢ãƒŸãƒ³ç³»ã‚«ãƒ©ãƒ¼å‰¤',
                        severity: 'é‡è¦',
                        symptoms: 'ã‹ã‚†ã¿ãƒ»ç™ºç–¹',
                        action: 'ãƒ‘ãƒƒãƒãƒ†ã‚¹ãƒˆå¿…é ˆã€ãƒãƒ³ã‚¸ã‚¢ãƒŸãƒ³ã‚«ãƒ©ãƒ¼ä½¿ç”¨'
                    }
                ],
                medicalNotes: {
                    skin: 'æ•æ„Ÿè‚Œ',
                    hair: 'ç´°æ¯›ã€ã‚„ã‚ã‚‰ã‹ã„',
                    scalp: 'ä¹¾ç‡¥ã—ã‚„ã™ã„',
                    preference: 'ãƒŠãƒãƒ¥ãƒ©ãƒ«ãªä»•ä¸ŠãŒã‚Šå¸Œæœ›',
                    caution: 'å¼·ã„è–¬å‰¤ã¯é¿ã‘ã‚‹'
                },
                treatments: [
                    {
                        date: '2024-03-14',
                        service: 'ã‚«ãƒƒãƒˆ + ã‚«ãƒ©ãƒ¼ + ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ',
                        staff: 'ç”°ä¸­',
                        duration: 90,
                        price: 12000,
                        color: '8ãƒˆãƒ¼ãƒ³ã®ã‚¢ãƒƒã‚·ãƒ¥ãƒ–ãƒ©ã‚¦ãƒ³',
                        chemicals: 'ã‚¤ãƒ«ãƒŸãƒŠã‚«ãƒ©ãƒ¼',
                        notes: 'å‰é«ªã‚’5mmçŸ­ãã€‚å…¨ä½“çš„ã«è»½ã‚„ã‹ãªä»•ä¸ŠãŒã‚Šã€‚ãŠå®¢æ§˜å¤§å¤‰æº€è¶³ã€‚',
                        photos: ['before-2024-03-14', 'after-2024-03-14', 'process-2024-03-14']
                    },
                    {
                        date: '2024-01-20',
                        service: 'ã‚«ãƒƒãƒˆ + ãƒ‘ãƒ¼ãƒ',
                        staff: 'ä½è—¤',
                        duration: 120,
                        price: 15000,
                        perm: 'ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ‘ãƒ¼ãƒï¼ˆã‚†ã‚‹ã‚ï¼‰',
                        notes: 'é«ªè³ªãŒç´°ã„ãŸã‚å¼±ã‚ã®è–¬å‰¤ä½¿ç”¨ã€‚æŒã¡ãŒè‰¯å¥½ã€‚',
                        photos: ['before-2024-01-20', 'after-2024-01-20']
                    }
                ]
            }
        };
        
        // ãƒšãƒ¼ã‚¸åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadCustomerData(customerId);
        });
        
        function loadCustomerData(customerId) {
            const customer = customerDatabase[customerId];
            if (!customer) {
                alert('é¡§å®¢ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }
            
            // åŸºæœ¬æƒ…å ±è¡¨ç¤º
            document.getElementById('patientAvatar').textContent = customer.name[0];
            document.getElementById('patientName').textContent = customer.name + ' æ§˜';
            document.getElementById('customerId').textContent = customer.id;
            document.getElementById('patientPhone').textContent = customer.phone;
            document.getElementById('patientEmail').textContent = customer.email;
            document.getElementById('lastVisit').textContent = customer.lastVisit;
            document.getElementById('visitCount').textContent = customer.visitCount + 'å›';
            document.getElementById('totalSpent').textContent = 'Â¥' + customer.totalSpent.toLocaleString();
        }
        
        // æ–°è¦æ–½è¡“è¨˜éŒ²è¿½åŠ 
        function addNewTreatment() {
            const service = prompt('æ–½è¡“å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (ä¾‹: ã‚«ãƒƒãƒˆ+ã‚«ãƒ©ãƒ¼):');
            const staff = prompt('æ‹…å½“ã‚¹ã‚¿ãƒƒãƒ•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
            const duration = prompt('æ–½è¡“æ™‚é–“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (åˆ†):');
            const price = prompt('æ–™é‡‘ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (å††):');
            const notes = prompt('æ–½è¡“è¨˜éŒ²ãƒ»å‚™è€ƒã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
            
            if (service && staff && duration && price) {
                const today = new Date().toLocaleDateString('ja-JP');
                alert(`âœ… æ–°è¦æ–½è¡“è¨˜éŒ²ã‚’è¿½åŠ ã—ã¾ã—ãŸ\n\n` +
                      `æ—¥ä»˜: ${today}\n` +
                      `æ–½è¡“: ${service}\n` +
                      `æ‹…å½“: ${staff}\n` +
                      `æ™‚é–“: ${duration}åˆ†\n` +
                      `æ–™é‡‘: Â¥${price}\n` +
                      `è¨˜éŒ²: ${notes || 'ãªã—'}`);
                
                console.log('æ–°è¦æ–½è¡“è¨˜éŒ²:', { service, staff, duration, price, notes });
            }
        }
        
        // åŒ»ç™‚æƒ…å ±ç·¨é›†
        function editMedicalInfo() {
            const allergies = prompt('ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ã‚’æ›´æ–°ã—ã¦ãã ã•ã„:', 'ã‚¸ã‚¢ãƒŸãƒ³ç³»ã‚«ãƒ©ãƒ¼å‰¤ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼');
            const skinType = prompt('è‚Œè³ªã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:', 'æ•æ„Ÿè‚Œ');
            const hairType = prompt('é«ªè³ªã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:', 'ç´°æ¯›ã€ã‚„ã‚ã‚‰ã‹ã„');
            const cautions = prompt('æ³¨æ„äº‹é …ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:', 'å¼·ã„è–¬å‰¤ã¯é¿ã‘ã‚‹');
            
            if (allergies || skinType || hairType || cautions) {
                alert(`âœ… åŒ»ç™‚æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ\n\n` +
                      `ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼: ${allergies}\n` +
                      `è‚Œè³ª: ${skinType}\n` +
                      `é«ªè³ª: ${hairType}\n` +
                      `æ³¨æ„äº‹é …: ${cautions}`);
                
                console.log('åŒ»ç™‚æƒ…å ±æ›´æ–°:', { allergies, skinType, hairType, cautions });
            }
        }
        
        // å†™çœŸç®¡ç†
        function viewPhoto(photoId) {
            alert(`ğŸ“· æ–½è¡“å†™çœŸè¡¨ç¤º\n\nå†™çœŸID: ${photoId}\n\nå®Ÿéš›ã®é‹ç”¨ã§ã¯é«˜è§£åƒåº¦ã®æ–½è¡“å†™çœŸãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚\nBefore/Afteræ¯”è¼ƒæ©Ÿèƒ½ã‚‚å«ã¾ã‚Œã¾ã™ã€‚`);
        }
        
        function addPhoto() {
            const photoType = prompt('å†™çœŸã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„:\n\n1. Beforeï¼ˆæ–½è¡“å‰ï¼‰\n2. Afterï¼ˆæ–½è¡“å¾Œï¼‰\n3. Processï¼ˆæ–½è¡“ä¸­ï¼‰\n\nç•ªå·ã‚’å…¥åŠ›:', '1');
            const description = prompt('å†™çœŸã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:', '');
            
            if (photoType) {
                const types = { '1': 'Before', '2': 'After', '3': 'Process' };
                const type = types[photoType] || 'ãã®ä»–';
                
                alert(`âœ… å†™çœŸã‚’è¿½åŠ ã—ã¾ã—ãŸ\n\nç¨®é¡: ${type}\nèª¬æ˜: ${description || 'ãªã—'}\n\nå®Ÿéš›ã®é‹ç”¨ã§ã¯ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ã§æ’®å½±ãƒ»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚`);
                console.log('å†™çœŸè¿½åŠ :', { type, description });
            }
        }
        
        // ã‚«ãƒ«ãƒ†æ“ä½œ
        function printRecord() {
            alert('ğŸ–¨ï¸ ã‚«ãƒ«ãƒ†å°åˆ·æ©Ÿèƒ½\n\nå°åˆ·ç”¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚«ãƒ«ãƒ†ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚\n\nãƒ»æ‚£è€…æƒ…å ±\nãƒ»æ–½è¡“å±¥æ­´\nãƒ»åŒ»ç™‚æƒ…å ±\nãƒ»å†™çœŸï¼ˆé¸æŠå¯èƒ½ï¼‰');
        }
        
        function exportRecord() {
            const customer = customerDatabase[customerId];
            const exportData = {
                customerId: customer?.id,
                name: customer?.name,
                exportDate: new Date().toLocaleDateString(),
                treatments: customer?.treatments?.length || 0
            };
            
            alert(`ğŸ“¥ ã‚«ãƒ«ãƒ†ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›\n\n${JSON.stringify(exportData, null, 2)}\n\nCSVãƒ»PDFå½¢å¼ã§ã®å‡ºåŠ›ãŒå¯èƒ½ã§ã™ã€‚`);
            console.log('ã‚«ãƒ«ãƒ†å‡ºåŠ›:', exportData);
        }
        
        function goBackToCustomers() {
            window.location.href = '/customers.html';
        }
        
        // ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');

            if (mobileMenuToggle && sidebar && sidebarOverlay) {
                mobileMenuToggle.addEventListener('click', () => {
                    sidebar.classList.toggle('mobile-open');
                    sidebarOverlay.classList.toggle('active');
                });

                sidebarOverlay.addEventListener('click', () => {
                    sidebar.classList.remove('mobile-open');
                    sidebarOverlay.classList.remove('active');
                });
            }

            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    localStorage.clear();
                    sessionStorage.clear();
                    window.location.href = '/login.html';
                });
            }
        });
    </script>
</body>
</html>