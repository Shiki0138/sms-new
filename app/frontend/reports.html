<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#f8e5e1">
    <title>ãƒ¬ãƒãƒ¼ãƒˆè¨­å®š - Salon LumiÃ¨re</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/legacy/main-unified.css?v=20250907">
    <link rel="stylesheet" href="/css/mobile-navigation.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .reports-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .reports-header {
            background: linear-gradient(135deg, #f8e5e1 0%, #f4d1c7 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        .report-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .filter-group label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            font-weight: 500;
        }
        .filter-group select,
        .filter-group input {
            padding: 8px 12px;
            border: 2px solid #d4a574;
            border-radius: 8px;
            outline: none;
        }
        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }
        .report-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-left: 4px solid #d4a574;
        }
        .report-card.full-width {
            grid-column: 1 / -1;
        }
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }
        .chart-container.large {
            height: 400px;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .metric-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #d4a574;
        }
        .metric-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            margin-top: 5px;
        }
        .metric-change {
            font-size: 12px;
            margin-top: 5px;
        }
        .metric-change.positive {
            color: #4caf50;
        }
        .metric-change.negative {
            color: #f44336;
        }
        .export-btn {
            background: #d4a574;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .export-btn:hover {
            background: #c49660;
        }
        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .report-table th,
        .report-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .report-table th {
            background: #f8f9fa;
            font-weight: 500;
            color: #666;
        }
        .report-table tr:hover {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" id="mobileMenuToggle">â˜°</button>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-wrapper">âœ¨</div>
            <h2 class="salon-name">Salon LumiÃ¨re</h2>
            <span class="plan-badge">PREMIUM</span>
        </div>

        <nav class="nav-menu">
            <a href="/dashboard.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span>ãƒ›ãƒ¼ãƒ </span>
            </a>
            <a href="/appointments.html" class="nav-item">
                <span class="nav-icon">ğŸ“…</span>
                <span>äºˆç´„</span>
            </a>
            <a href="/customers.html" class="nav-item">
                <span class="nav-icon">ğŸ‘¥</span>
                <span>é¡§å®¢</span>
            </a>
            <a href="/messages.html" class="nav-item">
                <span class="nav-icon">ğŸ’¬</span>
                <span>é€£çµ¡</span>
            </a>
            <a href="/reports.html" class="nav-item active">
                <span class="nav-icon">ğŸ“ˆ</span>
                <span>å£²ä¸Š</span>
            </a>
            <a href="/settings.html" class="nav-item">
                <span class="nav-icon">âš™ï¸</span>
                <span>è¨­å®š</span>
            </a>
        </nav>

        <div class="user-section">
            <div class="user-info">
                <div class="user-avatar">ç®¡</div>
                <div class="user-details">
                    <div class="user-name">ç®¡ç†è€…</div>
                    <div class="user-role">Administrator</div>
                </div>
            </div>
            <button class="logout-btn" id="logoutBtn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </aside>

    <main class="main-content">
        <div class="reports-container">
        <div class="reports-header">
            <h1 style="color: #8b4513; margin: 0; font-size: 2.5rem; font-family: 'Playfair Display', serif;">
                ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆãƒ»åˆ†æ
            </h1>
            <p style="color: #666; margin: 10px 0 0; font-size: 1.1rem;">
                å£²ä¸Šã¨æ¥­ç¸¾ã®åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
            </p>
        </div>

        <div class="report-filters">
            <div class="filter-group">
                <label>æœŸé–“</label>
                <select id="periodFilter">
                    <option value="today">ä»Šæ—¥</option>
                    <option value="week">ä»Šé€±</option>
                    <option value="month" selected>ä»Šæœˆ</option>
                    <option value="quarter">å››åŠæœŸ</option>
                    <option value="year">ä»Šå¹´</option>
                    <option value="custom">ã‚«ã‚¹ã‚¿ãƒ æœŸé–“</option>
                </select>
            </div>
            <div class="filter-group" id="customDateGroup" style="display: none;">
                <label>é–‹å§‹æ—¥</label>
                <input type="date" id="startDate">
            </div>
            <div class="filter-group" id="customDateGroup2" style="display: none;">
                <label>çµ‚äº†æ—¥</label>
                <input type="date" id="endDate">
            </div>
            <div class="filter-group">
                <label>ãƒ¬ãƒãƒ¼ãƒˆç¨®åˆ¥</label>
                <select id="reportType">
                    <option value="sales">å£²ä¸Šãƒ¬ãƒãƒ¼ãƒˆ</option>
                    <option value="services">ã‚µãƒ¼ãƒ“ã‚¹åˆ†æ</option>
                    <option value="staff">ã‚¹ã‚¿ãƒƒãƒ•å®Ÿç¸¾</option>
                    <option value="customers">é¡§å®¢åˆ†æ</option>
                </select>
            </div>
            <div class="filter-group">
                <label>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</label>
                <button class="export-btn" onclick="generateReport()">ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</button>
            </div>
        </div>

        <div class="reports-grid" id="reportsGrid">
            <!-- Report cards will be loaded here -->
        </div>
        </div>
    </main>

    <script>
        // Mock data for reports
        const mockData = {
            sales: {
                totalRevenue: 2850000,
                previousRevenue: 2640000,
                totalBookings: 156,
                previousBookings: 142,
                avgBookingValue: 18269,
                previousAvgValue: 18592,
                dailySales: [
                    { date: '2025-09-01', revenue: 95000 },
                    { date: '2025-09-02', revenue: 87000 },
                    { date: '2025-09-03', revenue: 92000 },
                    { date: '2025-09-04', revenue: 110000 },
                    { date: '2025-09-05', revenue: 105000 },
                    { date: '2025-09-06', revenue: 88000 }
                ]
            },
            services: [
                { name: 'ã‚«ãƒƒãƒˆ&ã‚«ãƒ©ãƒ¼', bookings: 45, revenue: 1260000, avgPrice: 28000 },
                { name: 'ã‚«ãƒƒãƒˆ', bookings: 38, revenue: 532000, avgPrice: 14000 },
                { name: 'ãƒ‘ãƒ¼ãƒ', bookings: 25, revenue: 675000, avgPrice: 27000 },
                { name: 'ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ', bookings: 32, revenue: 288000, avgPrice: 9000 },
                { name: 'ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘', bookings: 16, revenue: 128000, avgPrice: 8000 }
            ],
            staff: [
                { name: 'ä½è—¤ ç¾é¦™', bookings: 48, revenue: 1250000, rating: 4.9 },
                { name: 'ç”°ä¸­ æ¶¼å­', bookings: 42, revenue: 980000, rating: 4.8 },
                { name: 'å±±ç”° å¥å¤ª', bookings: 36, revenue: 720000, rating: 4.7 },
                { name: 'éˆ´æœ¨ å’²è‰¯', bookings: 20, revenue: 380000, rating: 4.5 },
                { name: 'é«˜æ©‹ èŠ±å­', bookings: 10, revenue: 120000, rating: 4.3 }
            ]
        };

        // Initialize reports page
        document.addEventListener('DOMContentLoaded', function() {
            generateReport();
            initializeFilters();
            
            // Initialize sidebar functionality
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');

            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('active');
                    sidebarOverlay.classList.toggle('active');
                    document.body.classList.toggle('sidebar-open');
                });
            }

            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', function() {
                    sidebar.classList.remove('active');
                    sidebarOverlay.classList.remove('active');
                    document.body.classList.remove('sidebar-open');
                });
            }
        });

        function initializeFilters() {
            const periodFilter = document.getElementById('periodFilter');
            periodFilter.addEventListener('change', function() {
                const customGroups = document.querySelectorAll('[id^="customDateGroup"]');
                if (this.value === 'custom') {
                    customGroups.forEach(group => group.style.display = 'flex');
                } else {
                    customGroups.forEach(group => group.style.display = 'none');
                }
                generateReport();
            });

            const reportType = document.getElementById('reportType');
            reportType.addEventListener('change', generateReport);
        }

        function generateReport() {
            const reportType = document.getElementById('reportType').value;
            const period = document.getElementById('periodFilter').value;
            
            clearReports();
            
            switch(reportType) {
                case 'sales':
                    generateSalesReport();
                    break;
                case 'services':
                    generateServicesReport();
                    break;
                case 'staff':
                    generateStaffReport();
                    break;
                case 'customers':
                    generateCustomersReport();
                    break;
            }
        }

        function clearReports() {
            document.getElementById('reportsGrid').innerHTML = '';
        }

        function generateSalesReport() {
            const grid = document.getElementById('reportsGrid');
            
            // Sales metrics
            const metricsCard = createReportCard('å£²ä¸Šãƒ¡ãƒˆãƒªã‚¯ã‚¹', 'full-width');
            metricsCard.innerHTML += `
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value">Â¥${(mockData.sales.totalRevenue / 1000000).toFixed(1)}M</div>
                        <div class="metric-label">ç·å£²ä¸Š</div>
                        <div class="metric-change positive">+${(((mockData.sales.totalRevenue - mockData.sales.previousRevenue) / mockData.sales.previousRevenue) * 100).toFixed(1)}%</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">${mockData.sales.totalBookings}</div>
                        <div class="metric-label">äºˆç´„æ•°</div>
                        <div class="metric-change positive">+${mockData.sales.totalBookings - mockData.sales.previousBookings}</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">Â¥${mockData.sales.avgBookingValue.toLocaleString()}</div>
                        <div class="metric-label">å¹³å‡å˜ä¾¡</div>
                        <div class="metric-change ${mockData.sales.avgBookingValue > mockData.sales.previousAvgValue ? 'positive' : 'negative'}">
                            ${mockData.sales.avgBookingValue > mockData.sales.previousAvgValue ? '+' : ''}Â¥${(mockData.sales.avgBookingValue - mockData.sales.previousAvgValue).toLocaleString()}
                        </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">${Math.round(mockData.sales.totalRevenue / mockData.sales.totalBookings / 1000)}K</div>
                        <div class="metric-label">å®¢å˜ä¾¡</div>
                        <div class="metric-change positive">+5.2%</div>
                    </div>
                </div>
            `;
            grid.appendChild(metricsCard);

            // Daily sales chart
            const chartCard = createReportCard('æ—¥åˆ¥å£²ä¸Šæ¨ç§»');
            chartCard.innerHTML += '<div class="chart-container"><canvas id="dailySalesChart"></canvas></div>';
            grid.appendChild(chartCard);

            // Create chart after DOM is updated
            setTimeout(() => {
                createDailySalesChart();
            }, 100);

            // Sales by time chart
            const timeChartCard = createReportCard('æ™‚é–“å¸¯åˆ¥å£²ä¸Š');
            timeChartCard.innerHTML += '<div class="chart-container"><canvas id="timeSalesChart"></canvas></div>';
            grid.appendChild(timeChartCard);

            setTimeout(() => {
                createTimeSalesChart();
            }, 200);
        }

        function generateServicesReport() {
            const grid = document.getElementById('reportsGrid');
            
            // Services table
            const tableCard = createReportCard('ã‚µãƒ¼ãƒ“ã‚¹åˆ¥å®Ÿç¸¾', 'full-width');
            tableCard.innerHTML += `
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>ã‚µãƒ¼ãƒ“ã‚¹å</th>
                            <th>äºˆç´„æ•°</th>
                            <th>å£²ä¸Š</th>
                            <th>å¹³å‡å˜ä¾¡</th>
                            <th>å£²ä¸Šã‚·ã‚§ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${mockData.services.map(service => {
                            const totalRevenue = mockData.services.reduce((sum, s) => sum + s.revenue, 0);
                            const share = ((service.revenue / totalRevenue) * 100).toFixed(1);
                            return `
                                <tr>
                                    <td><strong>${service.name}</strong></td>
                                    <td>${service.bookings}</td>
                                    <td>Â¥${service.revenue.toLocaleString()}</td>
                                    <td>Â¥${service.avgPrice.toLocaleString()}</td>
                                    <td>${share}%</td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>
            `;
            grid.appendChild(tableCard);

            // Services pie chart
            const chartCard = createReportCard('ã‚µãƒ¼ãƒ“ã‚¹åˆ¥å£²ä¸Šå‰²åˆ');
            chartCard.innerHTML += '<div class="chart-container"><canvas id="servicesPieChart"></canvas></div>';
            grid.appendChild(chartCard);

            setTimeout(() => {
                createServicesPieChart();
            }, 100);
        }

        function generateStaffReport() {
            const grid = document.getElementById('reportsGrid');
            
            // Staff performance table
            const tableCard = createReportCard('ã‚¹ã‚¿ãƒƒãƒ•å®Ÿç¸¾', 'full-width');
            tableCard.innerHTML += `
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>ã‚¹ã‚¿ãƒƒãƒ•å</th>
                            <th>äºˆç´„æ•°</th>
                            <th>å£²ä¸Š</th>
                            <th>å¹³å‡è©•ä¾¡</th>
                            <th>åŠ¹ç‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${mockData.staff.map(staff => {
                            const efficiency = (staff.revenue / staff.bookings / 1000).toFixed(1);
                            return `
                                <tr>
                                    <td><strong>${staff.name}</strong></td>
                                    <td>${staff.bookings}</td>
                                    <td>Â¥${staff.revenue.toLocaleString()}</td>
                                    <td>${staff.rating}</td>
                                    <td>Â¥${efficiency}K/ä»¶</td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>
            `;
            grid.appendChild(tableCard);

            // Staff performance chart
            const chartCard = createReportCard('ã‚¹ã‚¿ãƒƒãƒ•åˆ¥å£²ä¸Š');
            chartCard.innerHTML += '<div class="chart-container"><canvas id="staffChart"></canvas></div>';
            grid.appendChild(chartCard);

            setTimeout(() => {
                createStaffChart();
            }, 100);
        }

        function generateCustomersReport() {
            const grid = document.getElementById('reportsGrid');
            
            // Customer metrics
            const metricsCard = createReportCard('é¡§å®¢ãƒ¡ãƒˆãƒªã‚¯ã‚¹', 'full-width');
            metricsCard.innerHTML += `
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value">847</div>
                        <div class="metric-label">ç·é¡§å®¢æ•°</div>
                        <div class="metric-change positive">+12</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">23</div>
                        <div class="metric-label">æ–°è¦é¡§å®¢</div>
                        <div class="metric-change positive">+8</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">78%</div>
                        <div class="metric-label">ãƒªãƒ”ãƒ¼ãƒˆç‡</div>
                        <div class="metric-change positive">+3.2%</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">2.3</div>
                        <div class="metric-label">å¹³å‡æ¥åº—å›æ•°</div>
                        <div class="metric-change positive">+0.1</div>
                    </div>
                </div>
            `;
            grid.appendChild(metricsCard);

            // Customer retention chart
            const chartCard = createReportCard('é¡§å®¢ãƒªãƒ†ãƒ³ã‚·ãƒ§ãƒ³åˆ†æ');
            chartCard.innerHTML += '<div class="chart-container"><canvas id="retentionChart"></canvas></div>';
            grid.appendChild(chartCard);

            setTimeout(() => {
                createRetentionChart();
            }, 100);
        }

        function createReportCard(title, className = '') {
            const card = document.createElement('div');
            card.className = `report-card ${className}`;
            card.innerHTML = `
                <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 15px;">
                    <h3 style="margin: 0; color: #8b4513;">${title}</h3>
                    <button class="export-btn" onclick="exportReport('${title}')">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                </div>
            `;
            return card;
        }

        function createDailySalesChart() {
            const ctx = document.getElementById('dailySalesChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: mockData.sales.dailySales.map(d => new Date(d.date).toLocaleDateString('ja-JP', { month: 'short', day: 'numeric' })),
                    datasets: [{
                        label: 'æ—¥åˆ¥å£²ä¸Š',
                        data: mockData.sales.dailySales.map(d => d.revenue),
                        borderColor: '#d4a574',
                        backgroundColor: 'rgba(212, 165, 116, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'Â¥' + (value / 1000) + 'K';
                                }
                            }
                        }
                    }
                }
            });
        }

        function createTimeSalesChart() {
            const ctx = document.getElementById('timeSalesChart');
            if (!ctx) return;

            const timeData = [
                { time: '9:00', sales: 45000 },
                { time: '10:00', sales: 67000 },
                { time: '11:00', sales: 89000 },
                { time: '12:00', sales: 54000 },
                { time: '13:00', sales: 78000 },
                { time: '14:00', sales: 92000 },
                { time: '15:00', sales: 103000 },
                { time: '16:00', sales: 87000 },
                { time: '17:00', sales: 72000 },
                { time: '18:00', sales: 38000 }
            ];

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: timeData.map(d => d.time),
                    datasets: [{
                        label: 'æ™‚é–“å¸¯åˆ¥å£²ä¸Š',
                        data: timeData.map(d => d.sales),
                        backgroundColor: '#d4a574',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'Â¥' + (value / 1000) + 'K';
                                }
                            }
                        }
                    }
                }
            });
        }

        function createServicesPieChart() {
            const ctx = document.getElementById('servicesPieChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: mockData.services.map(s => s.name),
                    datasets: [{
                        data: mockData.services.map(s => s.revenue),
                        backgroundColor: [
                            '#d4a574',
                            '#c49660',
                            '#b8874d',
                            '#a67b42',
                            '#946f37'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function createStaffChart() {
            const ctx = document.getElementById('staffChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: mockData.staff.map(s => s.name.split(' ')[0]),
                    datasets: [{
                        label: 'å£²ä¸Š',
                        data: mockData.staff.map(s => s.revenue),
                        backgroundColor: '#d4a574',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'Â¥' + (value / 1000000).toFixed(1) + 'M';
                                }
                            }
                        }
                    }
                }
            });
        }

        function createRetentionChart() {
            const ctx = document.getElementById('retentionChart');
            if (!ctx) return;

            const retentionData = [100, 85, 72, 65, 58, 54, 50, 47, 44, 42, 40, 38];
            const months = ['1ãƒ¶æœˆ', '2ãƒ¶æœˆ', '3ãƒ¶æœˆ', '4ãƒ¶æœˆ', '5ãƒ¶æœˆ', '6ãƒ¶æœˆ', '7ãƒ¶æœˆ', '8ãƒ¶æœˆ', '9ãƒ¶æœˆ', '10ãƒ¶æœˆ', '11ãƒ¶æœˆ', '12ãƒ¶æœˆ'];

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'ãƒªãƒ†ãƒ³ã‚·ãƒ§ãƒ³ç‡',
                        data: retentionData,
                        borderColor: '#d4a574',
                        backgroundColor: 'rgba(212, 165, 116, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        function exportReport(title) {
            alert(`${title}ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ - å®Ÿè£…äºˆå®š\n\nã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¯èƒ½ãªå½¢å¼:\n- PDF\n- Excel\n- CSV`);
        }
    </script>
</body>
</html>