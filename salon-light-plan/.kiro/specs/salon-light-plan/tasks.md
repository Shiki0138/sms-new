# 美容サロン管理システム ライトプラン - 実装タスク

## 実装順序と各タスクの詳細

### 1. プロジェクト基盤とセットアップ（2時間）

#### 1.1 プロジェクト初期化とライブラリインストール

- [x] React + TypeScript + Viteプロジェクトの作成
- [x] 必要なライブラリのインストール
  - TailwindCSS, Headless UI
  - React Router, React Query
  - Supabase Client
  - date-fns, react-hot-toast
- [x] ESLint, Prettier, Huskyの設定

#### 1.2 プロジェクト構造の作成

- [ ] ディレクトリ構造の作成
  ```
  src/
  ├── components/
  │   ├── auth/
  │   ├── common/
  │   ├── customers/
  │   ├── dashboard/
  │   ├── reservations/
  │   ├── settings/
  │   └── ui/
  ├── contexts/
  ├── hooks/
  ├── lib/
  ├── pages/
  ├── types/
  └── utils/
  ```
- [ ] 基本的な型定義ファイルの作成

#### 1.3 環境設定

- [ ] .env.localファイルの作成
- [ ] 環境変数の型定義
- [ ] GitHubリポジトリの作成
- [ ] Vercelプロジェクトのセットアップ

### 2. Supabaseセットアップ（2時間）

#### 2.1 Supabaseプロジェクトの作成

- [ ] Supabaseアカウント作成とプロジェクト作成
- [ ] 環境変数の設定（URL、Anon Key）

#### 2.2 データベーススキーマの作成

- [ ] SQLファイルの実行（database-schema.sql）
- [ ] Row Level Security (RLS) ポリシーの設定
- [ ] インデックスの作成

#### 2.3 Supabaseクライアントの設定

- [ ] supabase.tsの作成
- [ ] 型定義の自動生成設定

### 3. 認証機能の実装（REQ001）（4時間）

#### 3.1 認証コンテキストの作成

- [ ] AuthContext.tsxの実装
- [ ] 認証状態管理
- [ ] 自動ログアウト機能（24時間）

#### 3.2 認証ページの実装

- [ ] ログインページ（/auth/login）
- [ ] サインアップページ（/auth/signup）
- [ ] パスワードリセットページ（/auth/reset-password）

#### 3.3 認証ガードの実装

- [ ] ProtectedRouteコンポーネント
- [ ] 未認証時のリダイレクト処理

#### 3.4 認証関連のフック

- [ ] useAuthフック
- [ ] useUserフック

### 4. 共通UIコンポーネントの作成（3時間）

#### 4.1 レイアウトコンポーネント

- [ ] AppLayoutコンポーネント（ヘッダー、サイドバー、メインコンテンツ）
- [ ] レスポンシブ対応

#### 4.2 基本UIコンポーネント

- [ ] Button, Input, Select
- [ ] Card, Modal
- [ ] Loading, ErrorMessage
- [ ] Table, Pagination

#### 4.3 ナビゲーション

- [ ] サイドバーメニュー
- [ ] モバイルメニュー
- [ ] ブレッドクラム

### 5. ダッシュボード機能の実装（REQ002）（3時間）

#### 5.1 ダッシュボードページ

- [ ] 本日の予約一覧コンポーネント
- [ ] 簡易統計表示コンポーネント
- [ ] クイックアクションボタン

#### 5.2 データ取得フック

- [ ] useTodayReservations
- [ ] useMonthlyStats
- [ ] リアルタイム更新対応

### 6. 顧客管理機能の実装（REQ003）（6時間）

#### 6.1 顧客一覧ページ

- [ ] 顧客リストコンポーネント
- [ ] 検索機能
- [ ] ソート機能（50音順）
- [ ] ページネーション
- [ ] プラン制限チェック（100件）

#### 6.2 顧客詳細・編集ページ

- [ ] 顧客情報表示
- [ ] 編集フォーム
- [ ] 来店履歴表示
- [ ] 削除機能（確認ダイアログ付き）

#### 6.3 新規顧客登録

- [ ] 登録フォーム
- [ ] バリデーション
- [ ] 重複チェック

#### 6.4 顧客関連のフック

- [ ] useCustomers
- [ ] useCustomer
- [ ] useCreateCustomer
- [ ] useUpdateCustomer
- [ ] useDeleteCustomer

### 7. 予約管理機能の実装（REQ004）（8時間）

#### 7.1 予約カレンダー

- [ ] カレンダーコンポーネント（月表示/週表示）
- [ ] 予約表示
- [ ] ドラッグ&ドロップ機能
- [ ] 営業時間の表示

#### 7.2 予約登録

- [ ] 新規予約フォーム
- [ ] 顧客選択（既存/新規）
- [ ] 日時選択（15分単位）
- [ ] メニュー選択
- [ ] 予約可能時間のチェック
- [ ] プラン制限チェック（月50件）

#### 7.3 予約編集・キャンセル

- [ ] 予約詳細ページ
- [ ] ステータス変更
- [ ] キャンセル処理

#### 7.4 予約一覧

- [ ] リスト表示
- [ ] フィルタリング機能
- [ ] CSVエクスポート

#### 7.5 予約関連のフック

- [ ] useReservations
- [ ] useReservation
- [ ] useCreateReservation
- [ ] useUpdateReservation
- [ ] useCancelReservation

### 8. 設定管理機能の実装（REQ005）（4時間）

#### 8.1 サロン情報設定

- [ ] 基本情報編集フォーム
- [ ] ロゴアップロード機能

#### 8.2 営業時間設定

- [ ] 曜日別設定フォーム
- [ ] 定休日設定

#### 8.3 メニュー管理

- [ ] メニュー一覧
- [ ] メニュー登録・編集
- [ ] 並び順変更
- [ ] 削除機能

#### 8.4 設定関連のフック

- [ ] useSalonInfo
- [ ] useBusinessHours
- [ ] useMenus

### 9. エラーハンドリングとローディング（2時間）

#### 9.1 グローバルエラーハンドリング

- [ ] ErrorBoundaryコンポーネント
- [ ] APIエラーハンドラー
- [ ] トースト通知

#### 9.2 ローディング処理

- [ ] Suspenseの設定
- [ ] スケルトンスクリーン
- [ ] プログレスインジケーター

### 10. パフォーマンス最適化（2時間）

#### 10.1 コード最適化

- [ ] React.lazyによるコード分割
- [ ] メモ化の実装
- [ ] 画像最適化

#### 10.2 データ取得最適化

- [ ] React Queryのキャッシュ設定
- [ ] 無限スクロール実装（必要な箇所）

### 11. テストの実装（4時間）

#### 11.1 ユニットテスト

- [ ] ユーティリティ関数のテスト
- [ ] カスタムフックのテスト

#### 11.2 統合テスト

- [ ] 主要コンポーネントのテスト
- [ ] ユーザーフローのテスト

### 12. 最終調整とデプロイ（2時間）

#### 12.1 最終チェック

- [ ] 全機能の動作確認
- [ ] レスポンシブデザインの確認
- [ ] パフォーマンステスト

#### 12.2 本番環境設定

- [ ] 環境変数の設定
- [ ] ドメイン設定
- [ ] SSL証明書の確認

#### 12.3 ドキュメント作成

- [ ] README.mdの更新
- [ ] 使い方ガイドの作成

## 実装時の注意事項

### コーディング規約

- TypeScriptの厳格な型付け
- ESLint/Prettierルールの遵守
- コンポーネントの適切な分割
- カスタムフックによるロジックの再利用

### エラーハンドリング

- すべてのAPIコールでエラー処理
- ユーザーフレンドリーなエラーメッセージ
- 適切なフォールバック表示

### アクセシビリティ

- セマンティックHTMLの使用
- ARIA属性の適切な使用
- キーボード操作のサポート
- 色のコントラスト比の確保

### セキュリティ

- 環境変数の適切な管理
- XSS対策（Reactのデフォルト機能）
- 入力値のサニタイズ
- RLSによるデータアクセス制御

### パフォーマンス

- 不要な再レンダリングの防止
- 遅延ローディングの活用
- 画像の最適化
- バンドルサイズの監視

## 推定作業時間

- 総作業時間：約45時間
- 期間：約1-2週間（1日3-4時間の作業で）

## デリバリー

- GitHubリポジトリ
- Vercelにデプロイされた本番環境
- 環境構築手順書
- 操作マニュアル
